<!DOCTYPE html>
<html>
     <script type='text/javascript' src='http://files.b1.jcink.com/html/jquery-1.7.2.min.js'></script> 
    <script>  
function countBattleVar(a,r,t,e,i){var l=Math.floor(a*pengaliStatusArray[i][0]+r*pengaliStatusArray[i][1]),s=Math.floor(t*pengaliStatusArray[i][2]),c=Math.floor(e*pengaliStatusArray[i][3]),p=Math.floor(t*pengaliStatusArray[i][4]),n=Math.floor(r*pengaliStatusArray[i][5]),o=Math.floor(a*pengaliStatusArray[i][6]+t*pengaliStatusArray[i][6]),u=Math.floor(e*pengaliStatusArray[i][7]);return[l,s,c,p,n,o,u]}function countDice(){var a=parseInt($("#charastat-STR").val()),r=parseInt($("#charastat-AGI").val()),t=parseInt($("#charastat-INT").val()),e=parseInt($("#charastat-VIT").val()),i=parseInt($("#equipstat-weaponID option:selected").val()),l=parseInt($("#equipstat-weaponlevel option:selected").val()),s=rarityIdentifier[$("#equipstat-weaponrarity option:selected").val().replace(/\s+/g,"").toLowerCase()],c=parseInt($("#equipstat-armorID option:selected").val()),p=parseInt($("#equipstat-armorlevel option:selected").val()),n=rarityIdentifier[$("#equipstat-armorrarity option:selected").val().replace(/\s+/g,"").toLowerCase()],o=parseInt($("#equipstat-acc_STR").val()),u=parseInt($("#equipstat-acc_AGI").val()),A=parseInt($("#equipstat-acc_INT").val()),y=parseInt($("#equipstat-acc_VIT").val()),M=classIdentifier[$("#charaClass").val().replace(/\s+/g,"").toLowerCase()],h=raceIdentifier[$("#charaRace").val().replace(/\s+/g,"").toLowerCase()],d=parseInt($("#charact_level").val()),v=50+10*(d-1),S=5+1*(d-1),f=a+r+t+e,C=rarityMultiplierArray[s]*(senjataStatusArray[i][0]+(l-1)*senjataStatusArray[i][4])+rarityMultiplierArray[n]*(armorStatusArray[c][0]+(p-1)*armorStatusArray[c][4]),I=rarityMultiplierArray[s]*(senjataStatusArray[i][1]+(l-1)*senjataStatusArray[i][5])+rarityMultiplierArray[n]*(armorStatusArray[c][1]+(p-1)*armorStatusArray[c][5]),D=rarityMultiplierArray[s]*(senjataStatusArray[i][2]+(l-1)*senjataStatusArray[i][6])+rarityMultiplierArray[n]*(armorStatusArray[c][2]+(p-1)*armorStatusArray[c][6]),T=rarityMultiplierArray[s]*(senjataStatusArray[i][3]+(l-1)*senjataStatusArray[i][7])+rarityMultiplierArray[n]*(armorStatusArray[c][3]+(p-1)*armorStatusArray[c][7]);isNaN(o)&&(o=0),isNaN(u)&&(u=0),isNaN(A)&&(A=0),isNaN(y)&&(y=0);var m=raceMultiplierArray[h][0]*(a+C+o),g=raceMultiplierArray[h][1]*(r+I+u),P=raceMultiplierArray[h][2]*(t+D+A),_=raceMultiplierArray[h][3]*(e+T+y),E=countBattleVar(m,g,P,_,M),F=E[0],K=E[1],q=E[2],G=E[3],N=E[6],j=Math.floor(P*intMP);critDMGperc=2+E[5]/(critDMGCap[0]+(d-1)*critDMGCap[1]),critChance=E[4]/(critChanceCap[0]+(d-1)*critChanceCap[1]),PDEFperc=Math.floor(100*q/(defCap[0]+(d-1)*defCap[1])),MDEFperc=Math.floor(100*G/(defCap[0]+(d-1)*defCap[1])),critDMGperc>2.89&&(critDMGperc=2.89),critChance>.89&&(critChance=.89),PDEFperc>85&&(PDEFperc=85),MDEFperc>85&&(MDEFperc=85),deltaPATK=critDMGperc*F-F,deltaMATK=critDMGperc*K-K,dicePATK="1d"+Math.floor(deltaPATK*(1-critChance))+"+"+Math.floor(F+deltaPATK*critChance),diceMATK="1d"+Math.floor(deltaMATK*(1-critChance))+"+"+Math.floor(K+deltaMATK*critChance),dicePDEF=q+" ("+PDEFperc+"%)",diceMDEF=G+" ("+MDEFperc+"%)",$("#status_PATK").val(dicePATK),$("#status_MATK").val(diceMATK),$("#status_critChance").val(Math.floor(100*critChance)+"%"),$("#status_critDamage").val(Math.floor(100*critDMGperc)+"%"),$("#status_PDEF").val(dicePDEF),$("#status_MDEF").val(diceMDEF),$("#status_HP").val(N),$("#status_MP").val(j),$("#min_STAT").html(S),$("#unall_STAT").html(v-f)}var senjataStatusArray=[[90,25,25,70,20,8,8,11],[25,90,25,70,8,20,8,11],[25,25,90,70,8,8,20,11],[40,40,40,90,9,9,9,20],[90,70,25,25,20,11,8,8],[25,70,90,25,8,11,20,8],[70,90,25,25,11,20,8,8],[25,90,70,25,8,20,11,8]],armorStatusArray=[[90,25,25,70,20,8,8,11],[25,90,25,70,8,20,8,11],[25,25,90,70,8,8,20,11],[40,40,40,90,9,9,9,20],[90,70,25,25,20,11,8,8],[25,70,90,25,8,11,20,8],[70,90,25,25,11,20,8,8],[25,90,70,25,8,20,11,8]],pengaliStatusArray=[[.65,.25,.5,.6,.8,5.25,3,30],[.25,.65,.45,.6,.8,3.65,2.1,30],[.2,.3,.8,.75,.75,5.5,3,30],[.45,.25,.6,.75,1,6.5,3,30],[.25,.5,.53,.75,.75,4.25,2.5,30],[.5,.25,.55,.6,.75,4.75,3,30],[.5,.5,.25,.6,.8,3.5,1.75,30]],rarityMultiplierArray=[1,1.15,1.5,2,3],raceMultiplierArray=[[1.2,1,1.2,1],[1,1.2,1.2,1],[1,1.2,1,1.2]],classIdentifier={warrior:0,archer:1,mage:2,cleric:3,academic:4,kali:5,assassin:6},raceIdentifier={human:0,elf:1,hybrid:2},rarityIdentifier={magic:0,rare:1,epic:2,unique:3,legend:4},critChanceCap=[1e3,100],critDMGCap=[2e3,500],defCap=[150,25];intMP=35;
</script>    

    
    <body>
        <div id="dn_form">
            <h1>World of Lagendia Status Simulator</h1>
            <table><tr><td>Character Race:</td><td><select class="masukan" id="charaRace"><option value="Human">Human</option><option value="Elf">Elf</option><option value="Hybrid">Hybrid</option></select></td></tr>
            <tr><td>Character Class:</td><td><select class="masukan" id="charaClass"><option value="Warrior">Warrior</option><option value="Archer">Archer</option><option value="Mage">Mage</option><option value="Cleric">Cleric</option><option value="Academic">Academic</option><option value="Kali">Kali</option><option value="Assassin">Assassin</option></select></td></tr>
            <tr><td>Character Level:</td><td><input class="masukan" id="charact_level" value="1"></td></tr>
            </table>
            <br><font style="size:120%;font-weight:bold">Base Status Input</font><br><br>
            <table><tr><td><b>STR: </b><br><b>INT: </b></td><td><input class="masukan" id="charastat-STR" value="0"><br><input class="masukan" id="charastat-INT" value="0"></td>
            <td><b>AGI: </b><br><b>VIT: </b></td><td><input class="masukan" id="charastat-AGI" value="0"><br><input class="masukan" id="charastat-VIT" value="0"></td></tr></table>
            Minimum per status: <span id="min_STAT">0</span> | Unallocated Status: <span id="unall_STAT">0</span>
            <br><br>
            <table><tr><td><b>Weapon Level: </b></td><td><select class="masukan" id="equipstat-weaponlevel"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option></select></td>
            <td><b>Armor Level: </b></td><td><select class="masukan" id="equipstat-armorlevel"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option></select></td></tr>
            <tr><td><b>Weapon Type: </b></td><td><select class="masukan" id="equipstat-weaponID"><option value="0">STR-VIT</option><option value="1">AGI-VIT</option><option value="2">INT-VIT</option><option value="3">VIT-ALL</option><option value="4">STR-AGI</option><option value="5">INT-AGI</option><option value="6">AGI-STR</option><option value="7">AGI-INT</option></select></td>
            <td><b>Armor Type: </b></td><td><select class="masukan" id="equipstat-armorID"><option value="0">STR-VIT</option><option value="1">AGI-VIT</option><option value="2">INT-VIT</option><option value="3">VIT-ALL</option><option value="4">STR-AGI</option><option value="5">INT-AGI</option><option value="6">AGI-STR</option><option value="7">AGI-INT</option></select></td></tr>
            <tr><td><b>Weapon Rarity: </b></td><td><select class="masukan" id="equipstat-weaponrarity"><option value="Magic">Magic</option><option value="Rare">Rare</option><option value="Epic">Epic</option><option value="Unique">Unique</option><option value="Legend">Legend</option></select></td>
            <td><b>Armor Rarity: </b></td><td><select class="masukan" id="equipstat-armorrarity"><option value="Magic">Magic</option><option value="Rare">Rare</option><option value="Epic">Epic</option><option value="Unique">Unique</option><option value="Legend">Legend</option></select></td></tr></table>
            <br>
            
            <br><font style="size:120%;font-weight:bold">Results</font><br><br>
            <table><tr><td><b>PATK Dice: </b><br><b>MATK Dice: </b></td><td><input class="results" id="status_PATK"><br><input class="results" id="status_MATK"></td>
            <td><b>Critical Chance: </b><br><b>Critical Damage: </b></td><td><input class="results" id="status_critChance"><br><input class="results" id="status_critDamage"></td></tr>
             <tr><td><b>PDEF: </b><br><b>MDEF: </b></td><td><input class="results" id="status_PDEF"><br><input class="results" id="status_MDEF"></td>
            <td><b>HP: </b><br><b>MP: </b></td><td><input class="results" id="status_HP"><br><input class="results" id="status_MP"></td></tr></table>

            <br><a href="javascript:void(0);" onclick="countDice()">Show Results</a>
        </div>
        <div id="ht_form">
        
        </div>
    </body>
</html>




<script>$( ".masukan" ).on('keyup', function () {
  countDice();
});

$( ".masukan" ).on('change', function () {
  countDice();
});</script>